<div class="min-h-screen flex flex-col md:flex-row">
	<!-- Formulaire reset password -->
	<div class="w-full md:w-1/2 flex flex-col justify-center items-center p-8 md:p-16 bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-100">
		<div class="w-full max-w-md opacity-0 animate-appear duration-500 no-connect-root">
			<!-- Logo et titre -->
			<div class="flex items-center space-x-3 mb-8">
				<img src="assets/img/logo.svg" alt="Logo" class="h-7 w-7" />
				<span class="text-2xl font-bold text-prime-blue">Aim Display</span>
			</div>

			<!-- Titre -->
			<div class="mb-8">
				<h1 class="text-3xl font-bold text-gray-900 mb-2">Réinitialisation de votre mot de passe</h1>
				@if (tokenPresent) {
				<p class="text-gray-600">Entrez votre nouveau mot de passe ci-dessous.</p>
				}
			</div>

			@if (tokenPresent) {
			<!-- Formulaire -->
			<form (ngSubmit)="resetPassword()" class="space-y-6">
				<div class="flex flex-col space-y-1">
					<label for="newPassword" class="text-sm font-medium text-gray-700">Nouveau mot de passe *</label>
					<div class="relative">
						<input
							[(ngModel)]="newPassword"
							name="newPassword"
							[type]="passwordFieldType"
							placeholder="Entrez votre nouveau mot de passe"
							class="w-full"
							pInputText
                            #inputField
						/>
						<iconify-icon
							[attr.icon]="passwordFieldType === 'password' ? 'mynaui:eye' : 'mynaui:eye-slash'"
							class="absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600 cursor-pointer text-2xl"
							(click)="passwordFieldType = commonService.togglePasswordVisibility(passwordFieldType)"
						></iconify-icon>
					</div>
				</div>

				<div class="flex flex-col space-y-1">
					<label for="newPasswordConfirmation" class="text-sm font-medium text-gray-700">Confirmer le mot de passe *</label>
					<div class="relative">
						<input
							[(ngModel)]="newPasswordConfirmation"
							name="newPasswordConfirmation"
							[type]="passwordFieldType"
							placeholder="Confirmez votre mot de passe"
							class="w-full"
							pInputText
                            #inputField
						/>
						<iconify-icon
							[attr.icon]="passwordFieldType === 'password' ? 'mynaui:eye' : 'mynaui:eye-slash'"
							class="absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600 cursor-pointer text-2xl"
							(click)="passwordFieldType = commonService.togglePasswordVisibility(passwordFieldType)"
						></iconify-icon>
					</div>
				</div>

				<button
					class="w-full inline-flex h-12 items-center justify-center rounded-md bg-prime-blue text-white hover:bg-hover-prime-blue px-5 text-base font-medium shadow transition-colors duration-250 cursor-pointer"
					type="submit"
					[disabled]="isLoading"
				>
					Réinitialiser le mot de passe
					<iconify-icon icon="tabler:arrow-right" class="text-[1.5rem] ml-2"></iconify-icon>
				</button>
			</form>
			} @else {
			<div class="text-gray-600 mb-5">Lien invalide ou expiré.</div>
			<div
				class="w-full inline-flex h-12 items-center justify-center rounded-md bg-prime-blue text-white hover:bg-hover-prime-blue px-5 text-base font-medium shadow transition-colors duration-250 cursor-pointer"
				(click)="commonService.redirectTo('forgot-password')"
			>
				Demander un nouveau lien
				<iconify-icon icon="tabler:arrow-right" class="text-[1.5rem] ml-2"></iconify-icon>
			</div>
			}
		</div>
	</div>

	<!-- Partie droite -->
	<div class="hidden md:block w-1/2 bg-prime-blue relative overflow-hidden">
		<div class="absolute inset-0 bg-gradient-to-br from-prime-blue to-indigo-800/90 z-10"></div>
		<div
			class="absolute inset-0 z-20 flex flex-col justify-center items-center text-white p-16 opacity-0 animate-appear duration-500 animation-delay-200"
		>
			<div class="max-w-md text-center">
				<h2 class="text-4xl font-bold mb-6">Sécurisez votre compte</h2>
				<p class="text-lg text-blue-100 mb-8">Choisissez un mot de passe robuste pour protéger vos données, et cette fois ci, notez le !</p>
			</div>
		</div>
	</div>
</div>
